React.js
========================================================================

Qué es :index:`React.js`
------------------------------------------------------------------------

**React** (también llamada **React.js** o **ReactJS**) es una biblioteca
JavaScript de código abierto diseñada para crear interfaces de usuario
con el objetivo de facilitar el desarrollo de aplicaciones en una sola
página. Es mantenido por *Facebook* y la comunidad de software libre. En
el proyecto hay más de mil desarrolladores libres. 

Cómo instalar React.js
----------------------

.. code:: bash

    npm install react

Cómo crear un proyecto React.js
------------------------------------------------------------------------

.. code:: bash

    npx create-react-app <app name>

Run the project in development mode
------------------------------------------------------------------------

.. code:: bash

    npm run start

How to make a full react+webpack+babel project from zero
------------------------------------------------------------------------

1) Create a new directory for the project. Inside, ejecute ``npm init``.
this creates a json ``package.json`` file with all the dependencies
(initially none).

.. code:: shell

    mkdir <app dir>
    cd $_
    npm init

2) Install needed libraries for weppack, react and babel. the ``--save``
flags means update the ``package.json`` file to include this
dependencies.

.. code:: bash

    npm install --save webpack react react-dom babel-loader \
                babel-preset-react babel-preset-es2015


3) Create a html to hos the project:

.. code:: bash

    mkdir public
    touch public/index.html
    vim public/index.html

Put the usual standard HTML page, with a ``div`` with id ``root`` por
the react application:

.. code:: html

    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>Hello React!</title>
      </head>
      <body>
        <h1 class="title"> Hello React </h1>
        <div id="root"></div>

        <script src="bundle.js" charset="utf-8"></script>
      </body>
    </html>

Here we referenca a ``bundle.js`` file that will be generated by webpack
from our source javascript code.

4) Create a ``js`` path for out javascrip code

.. code:: bash

    mkdir js
    touch js/app.js
    vim js/app.js

Put the next code in the ``app.js`` file:

.. code:: javascript

    import React from "react";
    import ReactDOM from "react-dom";

    var HelloMessage = React.createClass({
        render: function () {
            return <div>Hello {this.props.name}<div>;
            }
        });

    var mountNode = document.getElementById("root");
    ReactDOM.render(<HelloMessage name="john" />, mountNode);


5) Now we need to create a task for webpack to generate the bundle.
Create a file ``webpack.config.js`` and put this inside:

.. code:: javascript

    const path = require('path');
    module.exports = {
        entry: './js/App.js',
        output: {
            path: path.join(__dirname, 'public'),
            filename: 'bundle.js',
            },
        module: {
        loaders: [
            {
            test: /\.js$/,
            exclude: node-modules,
            loader: 'babel-loader',
            }
            ]
        }
    };

Now, this makes every file ending in ``.js`` to be loaded through babel.
To configure babel we nned to create a file named ``.babelrc`` to enable
the two extensions we installed is step 2. The conten of the file must
be:

.. code:: javascript

    {
        "presets": [
            "react",
            "es2015",
            ]
    }

6) Finally, we need to add a entry in the script section of the
``package.json`` to run the building process. Add a entry with key
``dev`` and the command ``webpack -wd``. the ``-w`` options means
**watch**, the ``-d`` stands for \**development mode\*. Final
``package.json`` file must be sometrhig lite this:

.. code:: javascript

    {
        "name": "lab01",
        "version": "1.0.0",
        "description": "",
        "main": "index.js",
        "scripts": {
            "dev": "webpack -wd"
            },
        "author": "",
        "license": "ISC",
        "dependencies": {
            "babel-loader": "^8.0.6",
            "babel-preset-es2015": "^6.24.1",
            "babel-preset-react": "^6.24.1",
            "react": "^16.12.0",
            "react-dom": "^16.12.0",
            "webpack": "^4.41.5"
            }
        }

Now we can use:

.. code:: bash

    npm run dev

to execute the process
